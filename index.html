<!doctype html>
<html lang="ru">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Do Not Press</title>
  <style>
    :root{
      --bg: #0b0c10;
      --fg: rgba(255,255,255,.88);
      --muted: rgba(255,255,255,.55);
      --glass: rgba(255,255,255,.06);
      --glass2: rgba(255,255,255,.10);
      --danger: #ff3b3b;
      --ok: #7CFFB2;
      --ring: rgba(255,255,255,.18);
    }
    html,body{height:100%;margin:0;overflow:hidden;background:var(--bg);color:var(--fg);font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial;}
    .wrap{position:fixed;inset:0;display:grid;place-items:center;padding:24px;}
    .card{
      width:min(560px, 92vw);
      border-radius:24px;
      background: linear-gradient(180deg, var(--glass), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 30px 80px rgba(0,0,0,.45);
      padding:22px;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
    }
    .top{display:flex;gap:12px;align-items:flex-start;justify-content:space-between;}
    .title{font-weight:800;font-size:20px;letter-spacing:.2px;}
    .subtitle{margin-top:6px;color:var(--muted);font-size:13px;line-height:1.35}
    .meter{
      height:10px;border-radius:999px;background:rgba(255,255,255,.08);
      overflow:hidden;border:1px solid rgba(255,255,255,.12);
      margin:14px 0 18px;
    }
    .meter > i{display:block;height:100%;width:0%;background:linear-gradient(90deg,var(--ok),#ffd36a,var(--danger));transition:width 350ms ease;}
    .center{display:grid;place-items:center;padding:18px 0 6px;}

    /* The Button */
    .btn{
      position:relative;
      width:min(420px, 86vw);
      height:78px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.16);
      background: radial-gradient(120% 140% at 30% 20%, rgba(255,255,255,.16), rgba(255,255,255,.04) 45%, rgba(255,255,255,.03));
      box-shadow:
        0 18px 50px rgba(0,0,0,.45),
        0 2px 0 rgba(255,255,255,.18) inset;
      color: rgba(255,255,255,.92);
      font-weight:900;
      font-size:16px;
      letter-spacing:.4px;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
      transform: translateZ(0);
      transition: transform 160ms ease, filter 200ms ease, border-color 200ms ease;
      overflow:hidden;
    }
    .btn:active{ transform: translateY(1px) scale(.995); }

    /* “Reflection” streak */
    .btn::before{
      content:"";
      position:absolute; inset:-50% -30%;
      background: linear-gradient(90deg,
        rgba(255,255,255,0) 0%,
        rgba(255,255,255,.35) 35%,
        rgba(255,255,255,.10) 50%,
        rgba(255,255,255,0) 70%
      );
      transform: rotate(18deg) translateX(-70%);
      animation: shine 2.2s ease-in-out infinite;
      pointer-events:none;
      opacity:.75;
    }
    @keyframes shine{
      0%{transform:rotate(18deg) translateX(-80%); opacity:.55;}
      55%{transform:rotate(18deg) translateX(70%); opacity:.95;}
      100%{transform:rotate(18deg) translateX(130%); opacity:0;}
    }

    /* Glitch overlay */
    .glitch{
      position:absolute; inset:0; pointer-events:none;
      background:
        linear-gradient(90deg, rgba(255,0,80,.0), rgba(255,0,80,.0)),
        linear-gradient(90deg, rgba(0,220,255,.0), rgba(0,220,255,.0));
      mix-blend-mode: screen;
      opacity:0;
      transition:opacity 180ms ease;
    }

    .msg{margin-top:14px;min-height:52px;color:var(--muted);font-size:13px;line-height:1.45;}
    .foot{display:flex;justify-content:space-between;gap:10px;align-items:center;margin-top:10px;}
    .tag{font-size:12px;color:rgba(255,255,255,.55)}
    .link{
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.14);
      padding:8px 10px;border-radius:12px;
      cursor:pointer;color:rgba(255,255,255,.9);
      font-weight:700;font-size:12px;
    }
    .link:active{transform:translateY(1px)}

    /* Stage styles (the button “breaks”) */
    body.stage-0 { --bg:#0b0c10; }
    body.stage-1 { --bg:#07080c; }
    body.stage-2 { --bg:#06060a; }
    body.stage-3 { --bg:#050509; }
    body.stage-4 { --bg:#040407; }

    body.stage-2 .btn{ filter: contrast(1.08) saturate(1.15); }
    body.stage-3 .btn{ border-color: rgba(255,59,59,.35); }
    body.stage-4 .btn{
      filter: contrast(1.18) saturate(1.25);
      box-shadow: 0 30px 90px rgba(255,59,59,.12), 0 18px 50px rgba(0,0,0,.55);
    }
    body.stage-3 .glitch,
    body.stage-4 .glitch{ opacity:.85; }

    /* Subtle screen shake */
    .shake{
      animation: shake 180ms linear 1;
    }
    @keyframes shake{
      0%{transform:translate(0,0)}
      20%{transform:translate(2px,-1px)}
      40%{transform:translate(-2px,1px)}
      60%{transform:translate(2px,1px)}
      80%{transform:translate(-1px,-2px)}
      100%{transform:translate(0,0)}
    }

    /* Scanlines for vibe */
    .scanlines{
      position:fixed; inset:0; pointer-events:none; z-index:999;
      background: repeating-linear-gradient(
        to bottom,
        rgba(255,255,255,.00) 0px,
        rgba(255,255,255,.00) 2px,
        rgba(0,0,0,.10) 3px
      );
      opacity:.12;
    }

    /* Accessible focus */
    .btn:focus-visible, .link:focus-visible{
      outline:none;
      box-shadow: 0 0 0 3px rgba(255,255,255,.12), 0 0 0 1px rgba(255,255,255,.26) inset, 0 18px 50px rgba(0,0,0,.45);
    }
  </style>
</head>
<body>
  <div class="wrap" id="wrap">
    <div class="card">
      <div class="top">
        <div>
          <div class="title" id="title">DON’T PRESS IT</div>
          <div class="subtitle" id="subtitle">На странице всего одна кнопка. И это не делает ситуацию безопасной.</div>
        </div>
        <div class="tag" id="counterTag">presses: 0</div>
      </div>

      <div class="meter" aria-hidden="true"><i id="meterBar"></i></div>

      <div class="center">
        <button class="btn" id="btn" type="button">
          <span id="btnText">Не нажимай</span>
          <span class="glitch" id="glitch"></span>
        </button>
      </div>

      <div class="msg" id="msg"></div>

      <div class="foot">
        <div class="tag" id="mood">mood: calm</div>
        <button class="link" id="reset" type="button">Стереть память</button>
      </div>
    </div>
  </div>

  <div class="scanlines"></div>

  <script>
    const $ = (id)=>document.getElementById(id);

    const btn = $("btn");
    const btnText = $("btnText");
    const title = $("title");
    const subtitle = $("subtitle");
    const msg = $("msg");
    const meterBar = $("meterBar");
    const counterTag = $("counterTag");
    const mood = $("mood");
    const reset = $("reset");
    const wrap = $("wrap");
    const glitch = $("glitch");

    const KEY = "do-not-press-state-v1";
    const state = load() ?? { presses: 0, stage: 0, last: 0 };

    const LINES = [
      "…",
      "Серьёзно? Это же было написано.",
      "Окей. Один раз — случайность.",
      "Ты проверяешь границы. Я вижу.",
      "Пожалуйста… перестань.",
      "Ты уверен, что это ты нажимаешь кнопку, а не она тебя?",
      "Интерфейс не обязан быть дружелюбным.",
      "Мне становится… неприятно.",
      "Слышишь этот тишинный звук? Это твоя ответственность.",
      "Дальше будет хуже. (Для нас обоих.)",
    ];

    const BUTTON_LABELS = [
      "Не нажимай",
      "Не надо",
      "Стоп",
      "Хватит",
      "Ты серьёзно?",
      "Последнее предупреждение",
      "…",
      "Ладно. Делай.",
      "Это уже странно",
      "Ты доволен?"
    ];

    const MOODS = ["calm","uneasy","tense","angry","broken"];

    applyState();

    btn.addEventListener("click", () => {
      state.presses++;
      state.stage = Math.min(4, Math.floor(state.presses / 3)); // 0..4
      state.last = Date.now();
      save(state);

      // feedback
      pulse();
      scare();
      applyState();
    });

    reset.addEventListener("click", () => {
      localStorage.removeItem(KEY);
      location.reload();
    });

    function applyState(){
      document.body.className = `stage-${state.stage}`;

      const p = state.presses;
      counterTag.textContent = `presses: ${p}`;

      // meter 0..100
      const m = Math.min(100, Math.round((p / 12) * 100));
      meterBar.style.width = m + "%";

      // texts
      title.textContent = titleText(state.stage, p);
      subtitle.textContent = subtitleText(state.stage, p);

      const line = LINES[Math.min(LINES.length-1, p)] ?? "…";
      msg.textContent = line;

      btnText.textContent = BUTTON_LABELS[Math.min(BUTTON_LABELS.length-1, p)] ?? "…";

      mood.textContent = `mood: ${MOODS[state.stage]}`;

      // glitch intensity
      const g = Math.min(1, state.stage / 4);
      glitch.style.background =
        `linear-gradient(90deg, rgba(255,0,80,${0.25*g}), rgba(255,0,80,0)),
         linear-gradient(90deg, rgba(0,220,255,${0.22*g}), rgba(0,220,255,0))`;

      // tiny usability sabotage
      if (state.stage >= 3) {
        // small random drift (but not unusable)
        const dx = (Math.random() - 0.5) * 10;
        const dy = (Math.random() - 0.5) * 6;
        btn.style.transform = `translate(${dx}px, ${dy}px)`;
      } else {
        btn.style.transform = "translate(0,0)";
      }

      // stage-specific behavior
      if (state.stage === 4) {
        btn.style.filter = "contrast(1.22) saturate(1.35)";
      } else {
        btn.style.filter = "";
      }
    }

    function titleText(stage, presses){
      if (presses === 0) return "DON’T PRESS IT";
      if (stage === 0) return "You saw the warning.";
      if (stage === 1) return "It remembers.";
      if (stage === 2) return "Stop testing it.";
      if (stage === 3) return "Enough.";
      return "…";
    }

    function subtitleText(stage, presses){
      if (presses === 0) return "На странице всего одна кнопка. И это не делает ситуацию безопасной.";
      if (stage === 0) return "Теперь мы оба знаем, что ты не умеешь останавливаться.";
      if (stage === 1) return "Кнопка меняется. Ты тоже.";
      if (stage === 2) return "Интерфейс начинает защищаться.";
      if (stage === 3) return "Ты хотел взаимодействие. Получай.";
      return "Окей. Нажимай дальше. Посмотрим, кто первый устанет.";
    }

    function pulse(){
      btn.classList.remove("shake");
      // force reflow
      void btn.offsetWidth;
      btn.classList.add("shake");
    }

    function scare(){
      // quick background pulse
      const t = document.documentElement;
      t.animate(
        [{ filter: "brightness(1)" }, { filter: "brightness(1.12)" }, { filter: "brightness(1)" }],
        { duration: 180, easing: "linear" }
      );

      // stage-based soundless “panic” via micro blur
      if (state.stage >= 2) {
        wrap.animate(
          [{ filter: "blur(0px)" }, { filter: "blur(1.6px)" }, { filter: "blur(0px)" }],
          { duration: 220, easing: "ease-out" }
        );
      }
    }

    function save(obj){
      localStorage.setItem(KEY, JSON.stringify(obj));
    }
    function load(){
      try{
        const raw = localStorage.getItem(KEY);
        return raw ? JSON.parse(raw) : null;
      }catch{ return null; }
    }
  </script>
</body>
</html>
